<!DOCTYPE html>
<html>
    <head>
        <title>TransferWise</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">

        <link href="/css/core.css" rel="stylesheet" />
        <link href="/css/grid.css" rel="stylesheet" />

        <!-- Mapbox stuffs -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" rel="stylesheet"/>
        <script src="https://api.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js"></script>
        <link href="https://api.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.css" rel="stylesheet"/>


        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="/js/jquery.ba-throttle-debounce.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="js/mapSection.js"></script>
    </head>
<body>
    <div class="content">
        <nav class="navbar navbar-expand-lg" style="background-color: #37517e">
            <div class="row" style="width: 100%;">
                <div class="col-md-8">
                    <a href="https://transferwise.com" class="navbar-brand hidden-md hidden-sm hidden-xs" style="color:white">
                        <img src="images/logo.png" style="margin-top: -2px;">
                    </a>
                </div>
            </div>
        </nav>

        <div class="row">
            <div class="col-md-4 metric-group-container">
                <div class="media main-metric-container">
                    <div class="media-left">
                        <i class="fa fa-piggy-bank metric-base-icon"></i>
                    </div>
                    <div class="media-body">
                        <span class="metric-title" data-metric="moneyTransferred">
                            -
                        </span>
                        <span class="metric-alt">
                            total savings
                        </span>
                        <span class="metric-caption">
                            Worldwide Competitive
                        </span>
                    </div>
                    <div class="media-right">
                        <i class="fa fa-angle-down float-right hover-here-icon"></i>
                    </div>
                </div>

                <div class="metric-containers">
                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-piggy-bank"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title" data-metric="moneyTransferred">
                                -
                            </span>
                                <span class="metric-alt">
                                total savings
                            </span>
                        </div>
                    </div>

                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-stopwatch"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title">
                                3.7s
                            </span>
                            <span class="metric-alt">
                                average transfer time
                            </span>
                        </div>
                    </div>

                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-globe-americas"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title">
                                76
                            </span>
                                <span class="metric-alt">
                                countries
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 metric-group-container">
                <div class="media main-metric-container">
                    <div class="media-left">
                        <i class="fa fa-credit-card metric-base-icon"></i>
                    </div>
                    <div class="media-body">
                        <span class="metric-title" data-metric="transactions">
                            -
                        </span>
                        <span class="metric-alt">
                            transactions completed
                        </span>
                        <span class="metric-caption">
                            TrustWorthy
                        </span>
                    </div>
                    <div class="media-right">
                        <i class="fa fa-angle-down float-right hover-here-icon"></i>
                    </div>
                </div>

                <div class="metric-containers">
                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-credit-card"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title" data-metric="transactions">
                                -
                            </span>
                            <span class="metric-alt">
                                transactions completed
                            </span>
                        </div>
                    </div>

                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-users"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title">
                                1.865.012
                            </span>
                            <span class="metric-alt">
                                customers registered
                            </span>
                        </div>
                    </div>

                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-money-bill"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title">
                                &euro; 76.893.612
                            </span>
                            <span class="metric-alt">
                                money exchanged
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 metric-group-container">
                <div class="media main-metric-container">
                    <div class="media-left">
                        <i class="fa fa-bolt metric-base-icon"></i>
                    </div>
                    <div class="media-body">
                        <span class="metric-title">
                            &euro; Euro
                        </span>
                        <span class="metric-alt">
                            is the most used currency
                        </span>
                        <span class="metric-caption">
                            Hall of Fame
                        </span>
                    </div>
                    <div class="media-right">
                        <i class="fa fa-angle-down float-right hover-here-icon"></i>
                    </div>
                </div>

                <div class="metric-containers">
                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-piggy-bank"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title">
                                &euro; 3.123.642
                            </span>
                            <span class="metric-alt">
                                total savings
                            </span>
                        </div>
                    </div>

                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-stopwatch"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title">
                                3.7s
                            </span>
                            <span class="metric-alt">
                                average transfer time
                            </span>
                        </div>
                    </div>

                    <div class="metric-container media">
                        <div class="media-left">
                            <i class="fa fa-globe-americas"></i>
                        </div>
                        <div class="media-body media-right">
                            <span class="metric-title">
                                76
                            </span>
                            <span class="metric-alt">
                                countries
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="map-container">
            <div class="map-container-overlay">
                <div class="header-text-container">
                    <div style="position: absolute" class="text-center header-text">
                        TransferWise is
                        <span id="hero"></span>
                        <div style="margin-top: 6px;">
                            <button class="btn btn-secondary btn-lg skip-button">
                                Skip
                            </button>
                            <button class="btn btn-primary btn-lg btn-icon try-it-button" style="z-index: 999999;">
                                Take a tour
                                <i class="fa fa-angle-right hero-icon"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div style=" width: 100%; position: absolute;" id="map"></div>
            <canvas id="canvas" style="width: 100%; position: absolute; height: 800px;"></canvas>
        </div>

        <div id="footer">
            <div class="row">
                <div class="col-md-4">
                    Copyright &copy; 2018
                </div>

                <div class="col-md-8 text-right">
                    Singularity team
                    <img class="brand-logo"
                         src="https://www.bristolgate.com/wp-content/uploads/2018/09/orionthemes-placeholder-image.png">
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/ityped@1.0.3" />
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="/js/locationHelper.js"></script>
    <script src="/js/route.js"></script>
    <script src="/js/route-effect.js"></script>
    <script src="/js/marker.js"></script>
    <script src="/js/map.js"></script>
    <script src="/js/tutorial.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            ityped.init('#hero', {
                strings: [
                    // "transparent.",
                    // "fast.",
                    // "reliable.",
                    "awesome."
                ],
                startDelay: 200,
                loop: false,
                onFinished: function () {
                    document.querySelector(".header-text-container").classList.add("finished");
                }
            });

            document.querySelector("#canvas").addEventListener("click", function (e) {
                e.target.style.display = "none";
            });

            $('#countryReset').on('click', function () {
                resetActualCountries();
            });

            $(".skip-button").click(function () {
                $(".map-container-overlay").css({
                    opacity: 0
                });

                setTimeout(
                    function () {
                        $(".map-container-overlay").css({
                            display: "none"
                        })
                    },
                    1500
                );
            });

            $(".try-it-button").click(function () {
                $(".map-container-overlay").css({
                    opacity: 0
                });

                $("#tutorialModalStepFirst").modal('show');

                setTimeout(
                    function () {
                        $(".map-container-overlay").css({
                            display: "none"
                        })
                    },
                    1500
                );
            });


            var tutorialModalStepFirst = "#tutorialModalStepFirst";
            var tutorialModalStepSecond = "#tutorialModalStepSecond";
            var tutorialModalStepThird = "#tutorialModalStepThird";
            var tutorialModalStepFourth = "#tutorialModalStepFourth";
            var tutorialModalStepFifth = "#tutorialModalStepFifth";
            var tutorialModalStepSixth = "#tutorialModalStepSixth";

            setPositionTutorialModal(tutorialModalStepFirst);
            setPositionTutorialModal(tutorialModalStepSecond);
            setPositionTutorialModal(tutorialModalStepThird);
            setPositionTutorialModal(tutorialModalStepFourth);
            setPositionTutorialModal(tutorialModalStepFifth);
            setPositionTutorialModal(tutorialModalStepSixth);
        });

        var socket = io();
        socket.on(
            "arrows",
            // function (data) {
                // Showing transfer routes from socket
                $.throttle(
                    100,
                    function (data) {
                        window.TransferWise.Route.create(
                            data.src_country,
                            data.tar_country
                        );
                    }
                )
            // }
        );

        var updateElementValue = function (name, value) {
            var element = document.querySelectorAll("[data-metric='" + name + "']");

            if (!element) {
                return;
            }

            element.forEach(function (el) {
                el.innerHTML = new Intl.NumberFormat("en-EN").format(value);
            });
        };

        socket.on(
            "metric",
            function (data) {
                updateElementValue(data.name, data.value);
            }
        );

        function end() {
            var map = window.TransferWise.map;

            for (let i = 0; i <= 60; i++) {
                setTimeout(
                    function () {
                        map.setPitch(60 - i);
                    },
                    20 * i
                );
            }
        }

        function start() {
            var map = window.TransferWise.map;

            for (let i = 0; i <= 60; i++) {
                setTimeout(
                    function () {
                        map.setPitch(i);
                    },
                    20 * i
                );
            }
        }

        $(document).on("click", "[data-canvas-show]", function () {
            $("#canvas").show();
        });
    </script>
</body>
</html>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="false" data-backdrop="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" style="font-weight: bold; font-size: 1.5rem;" id="country-info-title">
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" data-canvas-show>
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <label><i class="fa fa-user-alt"></i>   Customers: <span id="countOfCustomer"></span></label>
                </div>
                <div>
                    <label><i class="fa fa-exchange-alt"></i>   Transactions: <span id="countOfTransactions"></span></label>
                </div>
                <div>
                    <label><i class="fa fa-handshake"></i>  Money transfered: <span id="moneyTransfered"></span></label>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="countries" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="false" data-backdrop="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" style="font-weight: bold; font-size: 1.5rem;" id="countries-info-title"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" data-canvas-show>
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div>
                    <i class="fa fa-money-bill"></i>  From:
                        <select class="form-control" id="exampleFormControlSelect1">
                            <option>HUF</option>
                        </select>
                </div>
                <div style="margin-top: 4%">
                    <i class="fa fa-money-bill-alt"></i>  To:
                        <select class="form-control" id="exampleFormControlSelect2">
                            <option>EUR</option>
                        </select>
                </div>
                <div style="margin-top: 4%">
                    <label> <i class="fa fa-credit-card"></i>  Price: <span id="price" class="text-right"></span></label>
                </div>
                <div>
                    <div class="form-group" style="width: 60%">
                        <input type="text" placeholder="transacted value" class="form-control form-inline" id="transactedValue">
                    </div>
                    <button style="margin-top: 2%" class="btn btn-primary btn-sm" id="calculate">Calculate    <i class="fa fa-angle-right" style="color: white; padding-left: 7px"></i> </button>
                </div>
                <div style="padding-top:4%;" class="text-center">
                    <span id="result" style="font-size: 16px; font-family: Arial"><span id="currencyType" ></span></span>
                    <script>
                        document.getElementById('currencyType').innerHTML = $('#toCurrency').val();

                        $(document).ready(function() {
                            $("#calculate").click(function(){
                                var transactedValue = $('#transactedValue').val();


                                const numberWithCommas = (x) => {
                                    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                                }
                                document.getElementById('result').innerHTML = numberWithCommas( Math.round(transactedValue * $('#price')[0].innerHTML));
                            });
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tutorial First Step -->
<div class="modal hide tutorial-modal" id="tutorialModalStepFirst" tabindex="-1" role="dialog" aria-labelledby="tutorialModalStepFirstTitle" aria-hidden="false" data-backdrop="true" modal-backdrop="false">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tutorialModalStepFirstTitle">Step: 1 / 6</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Here you can see all money transactions over the world in real time at TransferWise.
            </div>
            <div class="modal-footer text-center">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="nextSecondTutorialStep">Next step</button>
            </div>
        </div>
    </div>
</div>

<!-- Tutorial Second Step -->
<div class="modal hide tutorial-modal" id="tutorialModalStepSecond" tabindex="-1" role="dialog" aria-labelledby="tutorialModalStepSecondTitle" aria-hidden="false" data-backdrop="true" modal-backdrop="false">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tutorialModalStepSecondTitle">Step: 2 / 6</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Select the country where do you want to transfer money from by clicking on it.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="nextThirdTutorialStep">Next step</button>
            </div>
        </div>
    </div>
</div>

<!-- Tutorial Third Step -->
<div class="modal hide tutorial-modal" id="tutorialModalStepThird" tabindex="-1" role="dialog" aria-labelledby="tutorialModalStepThirdTitle" aria-hidden="false" data-backdrop="true" modal-backdrop="false">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tutorialModalStepThirdTitle">Step: 3 / 6</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Here you can see a box, where you can find some information about this selected country.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="nextFourthTutorialStep">Next step</button>
            </div>
        </div>
    </div>
</div>

<!-- Tutorial Fourth Step -->
<div class="modal hide tutorial-modal" id="tutorialModalStepFourth" tabindex="-1" role="dialog" aria-labelledby="tutorialModalStepFourthTitle" aria-hidden="false" data-backdrop="true" modal-backdrop="false">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tutorialModalStepFourthTitle">Step: 4 / 6</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Please Select any other country. if you select a second country this new country will be your target country, where you want to transfer your money via TransferWise.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="nextFifthTutorialStep">Next step</button>
            </div>
        </div>
    </div>
</div>

<!-- Tutorial Fifth Step -->
<div class="modal hide tutorial-modal" id="tutorialModalStepFifth" tabindex="-1" role="dialog" aria-labelledby="tutorialModalStepFifthTitle" aria-hidden="false" data-backdrop="true" modal-backdrop="false">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tutorialModalStepFifthTitle">Step: 5 / 6</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                In this new box you can find some information about exchange rate and you can calculate the fee and the amount of your transaction.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="nextSixthTutorialStep">
                    Next step
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Tutorial Sixth Step -->
<div class="modal hide tutorial-modal" id="tutorialModalStepSixth" tabindex="-1" role="dialog" aria-labelledby="tutorialModalStepSixthTitle" aria-hidden="false" data-backdrop="true" modal-backdrop="false">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tutorialModalStepSixthTitle">Step: 6 / 6</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Now you are ready to explore your future transactions.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Another transaction</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="zsoltiFuggvenyenekHivasa">Live map</button>
            </div>
        </div>
    </div>
</div>
